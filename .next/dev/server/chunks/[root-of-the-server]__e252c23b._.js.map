{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/win/sori_tarot/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\n/**\n * Especially important if using Fluid compute: Don't put this client in a\n * global variable. Always create a new client within each function when using\n * it.\n */\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options),\n            )\n          } catch {\n            // The \"setAll\" method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAOO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,2QAAO;IAEjC,OAAO,IAAA,8SAAkB,oKAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///home/win/sori_tarot/app/api/admin/reservations/%5Bid%5D/status/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { cookies } from \"next/headers\"\nimport { createClient } from \"@/lib/supabase/server\"\n\nexport async function PATCH(\n  request: Request,\n  { params }: { params: { id: string } },\n) {\n  const cookieStore = await cookies()\n  const adminSession = cookieStore.get(\"admin_session\")?.value\n\n  if (adminSession !== \"ok\") {\n    return NextResponse.json({ error: \"인증되지 않은 요청입니다.\" }, { status: 401 })\n  }\n\n  const { status, id, created_at } = await request\n    .json()\n    .catch(() => ({ status: \"\", id: undefined, created_at: undefined }))\n\n  if (!status) {\n    return NextResponse.json({ error: \"상태 값이 필요합니다.\" }, { status: 400 })\n  }\n\n  const allowed = [\"pending\", \"confirmed\", \"completed\", \"cancelled\"]\n  if (!allowed.includes(status)) {\n    return NextResponse.json({ error: \"허용되지 않은 상태 값입니다.\" }, { status: 400 })\n  }\n\n  const supabase = await createClient()\n\n  let query = supabase.from(\"reservations\").update({ status })\n\n  if (id !== undefined && id !== null) {\n    query = query.eq(\"id\", id)\n  } else if (created_at) {\n    query = query.eq(\"created_at\", created_at)\n  } else {\n    return NextResponse.json({ error: \"예약을 식별할 수 없습니다.\" }, { status: 400 })\n  }\n\n  const { error } = await query\n\n  if (error) {\n    console.error(\"Update status error:\", error)\n    return NextResponse.json(\n      { error: error.message || \"상태 변경 중 오류가 발생했습니다.\" },\n      { status: 500 },\n    )\n  }\n\n  return NextResponse.json({ success: true })\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,MACpB,OAAgB,EAChB,EAAE,MAAM,EAA8B;IAEtC,MAAM,cAAc,MAAM,IAAA,2QAAO;IACjC,MAAM,eAAe,YAAY,GAAG,CAAC,kBAAkB;IAEvD,IAAI,iBAAiB,MAAM;QACzB,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,MAAM,EAAE,MAAM,EAAE,EAAE,EAAE,UAAU,EAAE,GAAG,MAAM,QACtC,IAAI,GACJ,KAAK,CAAC,IAAM,CAAC;YAAE,QAAQ;YAAI,IAAI;YAAW,YAAY;QAAU,CAAC;IAEpE,IAAI,CAAC,QAAQ;QACX,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,UAAU;QAAC;QAAW;QAAa;QAAa;KAAY;IAClE,IAAI,CAAC,QAAQ,QAAQ,CAAC,SAAS;QAC7B,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,MAAM,WAAW,MAAM,IAAA,2IAAY;IAEnC,IAAI,QAAQ,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;QAAE;IAAO;IAE1D,IAAI,OAAO,aAAa,OAAO,MAAM;QACnC,QAAQ,MAAM,EAAE,CAAC,MAAM;IACzB,OAAO,IAAI,YAAY;QACrB,QAAQ,MAAM,EAAE,CAAC,cAAc;IACjC,OAAO;QACL,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM;IAExB,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAsB,GAChD;YAAE,QAAQ;QAAI;IAElB;IAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC3C"}}]
}