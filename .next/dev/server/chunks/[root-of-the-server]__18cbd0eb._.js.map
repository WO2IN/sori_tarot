{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/win/sori_tarot/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\n/**\n * Especially important if using Fluid compute: Don't put this client in a\n * global variable. Always create a new client within each function when using\n * it.\n */\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll()\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options),\n            )\n          } catch {\n            // The \"setAll\" method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAOO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,2QAAO;IAEjC,OAAO,IAAA,8SAAkB,oKAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///home/win/sori_tarot/app/api/reservation/route.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\"\nimport { NextResponse } from \"next/server\"\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const { name, phone, email, service_type, preferred_date, preferred_time, message } = body\n\n    // Validation\n    if (!name || !phone || !service_type || !preferred_date || !preferred_time) {\n      return NextResponse.json(\n        { error: \"필수 항목을 모두 입력해 주세요.\" },\n        { status: 400 }\n      )\n    }\n\n    const supabase = await createClient()\n\n    const { data, error } = await supabase.from(\"reservations\").insert([\n      {\n        name,\n        phone,\n        email: email || null,\n        service_type,\n        preferred_date,\n        preferred_time,\n        message: message || null,\n      },\n    ]).select()\n\n    if (error) {\n      console.error(\"Supabase error:\", error)\n      return NextResponse.json(\n        { error: \"예약 저장 중 오류가 발생했습니다.\" },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json(\n      { message: \"예약이 완료되었습니다.\", data },\n      { status: 201 }\n    )\n  } catch {\n    return NextResponse.json(\n      { error: \"서버 오류가 발생했습니다.\" },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function GET() {\n  try {\n    const supabase = await createClient()\n\n    const { data, error } = await supabase\n      .from(\"reservations\")\n      .select(\"*\")\n      .order(\"created_at\", { ascending: false })\n\n    if (error) {\n      return NextResponse.json(\n        { error: \"예약 조회 중 오류가 발생했습니다.\" },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json({ data })\n  } catch {\n    return NextResponse.json(\n      { error: \"서버 오류가 발생했습니다.\" },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,cAAc,EAAE,cAAc,EAAE,OAAO,EAAE,GAAG;QAEtF,aAAa;QACb,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,gBAAgB;YAC1E,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqB,GAC9B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;YACjE;gBACE;gBACA;gBACA,OAAO,SAAS;gBAChB;gBACA;gBACA;gBACA,SAAS,WAAW;YACtB;SACD,EAAE,MAAM;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAgB;QAAK,GAChC;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAM;QACN,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiB,GAC1B;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,OAAO;YACT,OAAO,+QAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,+QAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IAClC,EAAE,OAAM;QACN,OAAO,+QAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiB,GAC1B;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}